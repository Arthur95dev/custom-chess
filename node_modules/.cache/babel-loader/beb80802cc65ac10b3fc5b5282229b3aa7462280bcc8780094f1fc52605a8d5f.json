{"ast":null,"code":"import { Cell } from \"./Cell\";\nimport { Colors } from \"./Colors\";\nimport { Pawn } from \"./figures/Pawn\";\nimport { Rook } from \"./figures/Rook\";\nimport { Knight } from \"./figures/Knight\";\nimport { Bishop } from \"./figures/Bishop\";\nimport { Queen } from \"./figures/Queen\";\nimport { King } from \"./figures/King\";\nexport class Board {\n  constructor() {\n    this.cells = [];\n  }\n  initCells() {\n    for (let j = 0; j < 8; j++) {\n      let row = [];\n      for (let i = 0; i < 8; i++) {\n        let cellID = j * 8 + i;\n        if ((i + j) % 2 === 0) {\n          row.push(new Cell(this, i, j, Colors.WHITE, null, cellID)); // Белые ячейки\n        } else {\n          row.push(new Cell(this, i, j, Colors.BLACK, null, cellID)); // Чёрные ячейки\n        }\n      }\n\n      this.cells.push(row);\n    }\n  }\n  getCell(x, y) {\n    return this.cells[y][x] || null;\n  }\n  getCellFromID(id) {\n    let result = [];\n    this.cells.forEach(row => {\n      row.forEach(cell => cell.id === id ? result[0] = cell : cell);\n    });\n    return result[0];\n  }\n  getDiagonal(id, diff) {\n    let diagonal = [];\n    for (let i = id - diff; i <= 63; i -= diff) {\n      if (this.getCellFromID(i)) {\n        diagonal.push(this.getCellFromID(i));\n      }\n    }\n    for (let i = id + diff; i <= 63; i += diff) {\n      if (this.getCellFromID(i)) {\n        diagonal.push(this.getCellFromID(i));\n      }\n    }\n    diagonal = diagonal.sort((cell1, cell2) => cell1.id - cell2.id);\n    return diagonal;\n  }\n  setFigures() {\n    this.cells.forEach((row, index) => {\n      if (index === 1) {\n        row.forEach(cell => new Pawn(Colors.BLACK, cell));\n      }\n      if (index === 6) {\n        row.forEach(cell => new Pawn(Colors.WHITE, cell));\n      }\n      if (index === 0) {\n        row.forEach((cell, index) => {\n          if (index === 0 || index === 7) {\n            new Rook(Colors.BLACK, cell);\n          }\n          if (index === 1 || index === 6) {\n            new Knight(Colors.BLACK, cell);\n          }\n          if (index === 2 || index === 5) {\n            new Bishop(Colors.BLACK, cell);\n          }\n          if (index === 3) {\n            new Queen(Colors.BLACK, cell);\n          }\n          if (index === 4) {\n            new King(Colors.BLACK, cell);\n          }\n        });\n      }\n      if (index === 7) {\n        row.forEach((cell, index) => {\n          if (index === 0 || index === 7) {\n            new Rook(Colors.WHITE, cell);\n          }\n          if (index === 1 || index === 6) {\n            new Knight(Colors.WHITE, cell);\n          }\n          if (index === 2 || index === 5) {\n            new Bishop(Colors.WHITE, cell);\n          }\n          if (index === 3) {\n            new Queen(Colors.WHITE, cell);\n          }\n          if (index === 4) {\n            new King(Colors.WHITE, cell);\n          }\n        });\n      }\n    });\n  }\n  availableCellsForMove(cell) {\n    this.cells.forEach(row => {\n      row.forEach(cage => {\n        var _cell$figure;\n        return cell !== null && cell !== void 0 && (_cell$figure = cell.figure) !== null && _cell$figure !== void 0 && _cell$figure.canMove(cage) ? cage.available = !cage.available : cage.available = false;\n      });\n    });\n  }\n  updatedBoard() {\n    let newBoard = new Board();\n    newBoard.cells = this.cells;\n    return newBoard;\n  }\n}","map":{"version":3,"names":["Cell","Colors","Pawn","Rook","Knight","Bishop","Queen","King","Board","constructor","cells","initCells","j","row","i","cellID","push","WHITE","BLACK","getCell","x","y","getCellFromID","id","result","forEach","cell","getDiagonal","diff","diagonal","sort","cell1","cell2","setFigures","index","availableCellsForMove","cage","_cell$figure","figure","canMove","available","updatedBoard","newBoard"],"sources":["/home/arthas/github/custom-chess/src/model/Board.ts"],"sourcesContent":["import { Cell } from \"./Cell\"\nimport { Colors } from \"./Colors\"\nimport { Pawn } from \"./figures/Pawn\";\nimport { Rook } from \"./figures/Rook\";\nimport { Knight } from \"./figures/Knight\";\nimport { Bishop } from \"./figures/Bishop\";\nimport { Queen } from \"./figures/Queen\";\nimport { King } from \"./figures/King\";\n\nexport class Board {\n    \n    cells: Cell[][] = []\n    \n    initCells() {\n        for (let j: number = 0; j < 8; j++) {\n            let row: Cell[] = [];\n\n            for (let i: number = 0; i < 8; i++) {\n                let cellID = j * 8 + i\n                if ((i + j) % 2 === 0) {\n                    row.push(new Cell(this, i, j, Colors.WHITE, null, cellID)) // Белые ячейки\n                } else {\n                    row.push(new Cell(this, i, j, Colors.BLACK, null, cellID)) // Чёрные ячейки\n                }\n            }\n            this.cells.push(row)\n        }\n    }\n    getCell(x: number, y: number): Cell | null {\n        return this.cells[y][x] || null\n    }\n    getCellFromID(id: number): Cell {\n        let result: Array<Cell> = []\n        this.cells.forEach(row => {\n            row.forEach(cell => cell.id === id ? result[0] = cell : cell)\n        })\n        return result[0]\n    }\n    getDiagonal(id: number, diff: number): Cell[] {\n        let diagonal: Cell[] = []\n        for (let i = id - diff; i <= 63; i-= diff) {\n            if (this.getCellFromID(i)) {\n                diagonal.push(this.getCellFromID(i))\n            }\n        }\n        for (let i = id + diff; i <= 63; i+= diff) {\n            if (this.getCellFromID(i)) {\n                diagonal.push(this.getCellFromID(i))\n            }\n        }\n        diagonal = diagonal.sort((cell1, cell2) => cell1.id - cell2.id)\n        return diagonal\n    }\n    setFigures() {\n        this.cells.forEach((row, index) => {\n            if (index === 1) {\n                row.forEach(cell => new Pawn(Colors.BLACK, cell))\n            }\n            if (index === 6) {\n                row.forEach(cell => new Pawn(Colors.WHITE, cell))\n            }\n            if (index === 0) {\n                row.forEach((cell, index) => {\n                    if ((index === 0) || (index === 7)) {\n                        new Rook(Colors.BLACK, cell)\n                    }\n                    if ((index === 1) || (index === 6)) {\n                        new Knight(Colors.BLACK, cell)\n                    }\n                    if ((index === 2) || (index === 5)) {\n                        new Bishop(Colors.BLACK, cell)\n                    }\n                    if (index === 3) {\n                        new Queen(Colors.BLACK, cell)\n                    }\n                    if (index === 4) {\n                        new King(Colors.BLACK, cell)\n                    }\n                })\n            }\n            if (index === 7) {\n                row.forEach((cell, index) => {\n                    if ((index === 0) || (index === 7)) {\n                        new Rook(Colors.WHITE, cell)\n                    }\n                    if ((index === 1) || (index === 6)) {\n                        new Knight(Colors.WHITE, cell)\n                    }\n                    if ((index === 2) || (index === 5)) {\n                        new Bishop(Colors.WHITE, cell)\n                    }\n                    if (index === 3) {\n                        new Queen(Colors.WHITE, cell)\n                    }\n                    if (index === 4) {\n                        new King(Colors.WHITE, cell)\n                    }\n                })\n            }\n        })\n    }\n    availableCellsForMove(cell: Cell | null) {\n        this.cells.forEach(row => {\n            row.forEach(cage => cell?.figure?.canMove(cage) ? cage.available = !cage.available : cage.available = false)\n        })\n    }\n    updatedBoard() {\n        let newBoard = new Board();\n        newBoard.cells = this.cells;\n        return newBoard\n    }\n}\n"],"mappings":"AAAA,SAASA,IAAI,QAAQ,QAAQ;AAC7B,SAASC,MAAM,QAAQ,UAAU;AACjC,SAASC,IAAI,QAAQ,gBAAgB;AACrC,SAASC,IAAI,QAAQ,gBAAgB;AACrC,SAASC,MAAM,QAAQ,kBAAkB;AACzC,SAASC,MAAM,QAAQ,kBAAkB;AACzC,SAASC,KAAK,QAAQ,iBAAiB;AACvC,SAASC,IAAI,QAAQ,gBAAgB;AAErC,OAAO,MAAMC,KAAK,CAAC;EAAAC,YAAA;IAAA,KAEfC,KAAK,GAAa,EAAE;EAAA;EAEpBC,SAASA,CAAA,EAAG;IACR,KAAK,IAAIC,CAAS,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MAChC,IAAIC,GAAW,GAAG,EAAE;MAEpB,KAAK,IAAIC,CAAS,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QAChC,IAAIC,MAAM,GAAGH,CAAC,GAAG,CAAC,GAAGE,CAAC;QACtB,IAAI,CAACA,CAAC,GAAGF,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;UACnBC,GAAG,CAACG,IAAI,CAAC,IAAIhB,IAAI,CAAC,IAAI,EAAEc,CAAC,EAAEF,CAAC,EAAEX,MAAM,CAACgB,KAAK,EAAE,IAAI,EAAEF,MAAM,CAAC,CAAC,EAAC;QAC/D,CAAC,MAAM;UACHF,GAAG,CAACG,IAAI,CAAC,IAAIhB,IAAI,CAAC,IAAI,EAAEc,CAAC,EAAEF,CAAC,EAAEX,MAAM,CAACiB,KAAK,EAAE,IAAI,EAAEH,MAAM,CAAC,CAAC,EAAC;QAC/D;MACJ;;MACA,IAAI,CAACL,KAAK,CAACM,IAAI,CAACH,GAAG,CAAC;IACxB;EACJ;EACAM,OAAOA,CAACC,CAAS,EAAEC,CAAS,EAAe;IACvC,OAAO,IAAI,CAACX,KAAK,CAACW,CAAC,CAAC,CAACD,CAAC,CAAC,IAAI,IAAI;EACnC;EACAE,aAAaA,CAACC,EAAU,EAAQ;IAC5B,IAAIC,MAAmB,GAAG,EAAE;IAC5B,IAAI,CAACd,KAAK,CAACe,OAAO,CAACZ,GAAG,IAAI;MACtBA,GAAG,CAACY,OAAO,CAACC,IAAI,IAAIA,IAAI,CAACH,EAAE,KAAKA,EAAE,GAAGC,MAAM,CAAC,CAAC,CAAC,GAAGE,IAAI,GAAGA,IAAI,CAAC;IACjE,CAAC,CAAC;IACF,OAAOF,MAAM,CAAC,CAAC,CAAC;EACpB;EACAG,WAAWA,CAACJ,EAAU,EAAEK,IAAY,EAAU;IAC1C,IAAIC,QAAgB,GAAG,EAAE;IACzB,KAAK,IAAIf,CAAC,GAAGS,EAAE,GAAGK,IAAI,EAAEd,CAAC,IAAI,EAAE,EAAEA,CAAC,IAAGc,IAAI,EAAE;MACvC,IAAI,IAAI,CAACN,aAAa,CAACR,CAAC,CAAC,EAAE;QACvBe,QAAQ,CAACb,IAAI,CAAC,IAAI,CAACM,aAAa,CAACR,CAAC,CAAC,CAAC;MACxC;IACJ;IACA,KAAK,IAAIA,CAAC,GAAGS,EAAE,GAAGK,IAAI,EAAEd,CAAC,IAAI,EAAE,EAAEA,CAAC,IAAGc,IAAI,EAAE;MACvC,IAAI,IAAI,CAACN,aAAa,CAACR,CAAC,CAAC,EAAE;QACvBe,QAAQ,CAACb,IAAI,CAAC,IAAI,CAACM,aAAa,CAACR,CAAC,CAAC,CAAC;MACxC;IACJ;IACAe,QAAQ,GAAGA,QAAQ,CAACC,IAAI,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAKD,KAAK,CAACR,EAAE,GAAGS,KAAK,CAACT,EAAE,CAAC;IAC/D,OAAOM,QAAQ;EACnB;EACAI,UAAUA,CAAA,EAAG;IACT,IAAI,CAACvB,KAAK,CAACe,OAAO,CAAC,CAACZ,GAAG,EAAEqB,KAAK,KAAK;MAC/B,IAAIA,KAAK,KAAK,CAAC,EAAE;QACbrB,GAAG,CAACY,OAAO,CAACC,IAAI,IAAI,IAAIxB,IAAI,CAACD,MAAM,CAACiB,KAAK,EAAEQ,IAAI,CAAC,CAAC;MACrD;MACA,IAAIQ,KAAK,KAAK,CAAC,EAAE;QACbrB,GAAG,CAACY,OAAO,CAACC,IAAI,IAAI,IAAIxB,IAAI,CAACD,MAAM,CAACgB,KAAK,EAAES,IAAI,CAAC,CAAC;MACrD;MACA,IAAIQ,KAAK,KAAK,CAAC,EAAE;QACbrB,GAAG,CAACY,OAAO,CAAC,CAACC,IAAI,EAAEQ,KAAK,KAAK;UACzB,IAAKA,KAAK,KAAK,CAAC,IAAMA,KAAK,KAAK,CAAE,EAAE;YAChC,IAAI/B,IAAI,CAACF,MAAM,CAACiB,KAAK,EAAEQ,IAAI,CAAC;UAChC;UACA,IAAKQ,KAAK,KAAK,CAAC,IAAMA,KAAK,KAAK,CAAE,EAAE;YAChC,IAAI9B,MAAM,CAACH,MAAM,CAACiB,KAAK,EAAEQ,IAAI,CAAC;UAClC;UACA,IAAKQ,KAAK,KAAK,CAAC,IAAMA,KAAK,KAAK,CAAE,EAAE;YAChC,IAAI7B,MAAM,CAACJ,MAAM,CAACiB,KAAK,EAAEQ,IAAI,CAAC;UAClC;UACA,IAAIQ,KAAK,KAAK,CAAC,EAAE;YACb,IAAI5B,KAAK,CAACL,MAAM,CAACiB,KAAK,EAAEQ,IAAI,CAAC;UACjC;UACA,IAAIQ,KAAK,KAAK,CAAC,EAAE;YACb,IAAI3B,IAAI,CAACN,MAAM,CAACiB,KAAK,EAAEQ,IAAI,CAAC;UAChC;QACJ,CAAC,CAAC;MACN;MACA,IAAIQ,KAAK,KAAK,CAAC,EAAE;QACbrB,GAAG,CAACY,OAAO,CAAC,CAACC,IAAI,EAAEQ,KAAK,KAAK;UACzB,IAAKA,KAAK,KAAK,CAAC,IAAMA,KAAK,KAAK,CAAE,EAAE;YAChC,IAAI/B,IAAI,CAACF,MAAM,CAACgB,KAAK,EAAES,IAAI,CAAC;UAChC;UACA,IAAKQ,KAAK,KAAK,CAAC,IAAMA,KAAK,KAAK,CAAE,EAAE;YAChC,IAAI9B,MAAM,CAACH,MAAM,CAACgB,KAAK,EAAES,IAAI,CAAC;UAClC;UACA,IAAKQ,KAAK,KAAK,CAAC,IAAMA,KAAK,KAAK,CAAE,EAAE;YAChC,IAAI7B,MAAM,CAACJ,MAAM,CAACgB,KAAK,EAAES,IAAI,CAAC;UAClC;UACA,IAAIQ,KAAK,KAAK,CAAC,EAAE;YACb,IAAI5B,KAAK,CAACL,MAAM,CAACgB,KAAK,EAAES,IAAI,CAAC;UACjC;UACA,IAAIQ,KAAK,KAAK,CAAC,EAAE;YACb,IAAI3B,IAAI,CAACN,MAAM,CAACgB,KAAK,EAAES,IAAI,CAAC;UAChC;QACJ,CAAC,CAAC;MACN;IACJ,CAAC,CAAC;EACN;EACAS,qBAAqBA,CAACT,IAAiB,EAAE;IACrC,IAAI,CAAChB,KAAK,CAACe,OAAO,CAACZ,GAAG,IAAI;MACtBA,GAAG,CAACY,OAAO,CAACW,IAAI;QAAA,IAAAC,YAAA;QAAA,OAAIX,IAAI,aAAJA,IAAI,gBAAAW,YAAA,GAAJX,IAAI,CAAEY,MAAM,cAAAD,YAAA,eAAZA,YAAA,CAAcE,OAAO,CAACH,IAAI,CAAC,GAAGA,IAAI,CAACI,SAAS,GAAG,CAACJ,IAAI,CAACI,SAAS,GAAGJ,IAAI,CAACI,SAAS,GAAG,KAAK;MAAA,EAAC;IAChH,CAAC,CAAC;EACN;EACAC,YAAYA,CAAA,EAAG;IACX,IAAIC,QAAQ,GAAG,IAAIlC,KAAK,CAAC,CAAC;IAC1BkC,QAAQ,CAAChC,KAAK,GAAG,IAAI,CAACA,KAAK;IAC3B,OAAOgC,QAAQ;EACnB;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { Cell } from \"./Cell\";\nimport { Colors } from \"./Colors\";\nimport { Pawn } from \"./figures/Pawn\";\nimport { Rook } from \"./figures/Rook\";\nimport { Knight } from \"./figures/Knight\";\nimport { Bishop } from \"./figures/Bishop\";\nimport { Queen } from \"./figures/Queen\";\nimport { King } from \"./figures/King\";\nexport class Board {\n  constructor() {\n    this.cells = [];\n  }\n  initCells() {\n    for (let j = 0; j < 8; j++) {\n      let row = [];\n      for (let i = 0; i < 8; i++) {\n        let cellID = j * 8 + i;\n        if ((i + j) % 2 === 0) {\n          row.push(new Cell(this, i, j, Colors.WHITE, null, cellID)); // Белые ячейки\n        } else {\n          row.push(new Cell(this, i, j, Colors.BLACK, null, cellID)); // Чёрные ячейки\n        }\n      }\n\n      this.cells.push(row);\n    }\n  }\n  getCell(x, y) {\n    return this.cells[y][x] || null;\n  }\n  getCellFromID(id) {\n    let result = [];\n    this.cells.forEach(row => {\n      row.forEach(cell => cell.id === id ? result[0] = cell : cell);\n    });\n    return result[0];\n  }\n  getDiagonal(cell) {\n    let diagonalCells = [];\n    this.cells.forEach(row => {\n      row.forEach(cage => {\n        if (Math.abs(cage.x - cell.x) === Math.abs(cage.y - cell.y)) {\n          diagonalCells.push(cage);\n        }\n      });\n    });\n    return diagonalCells;\n  }\n  setFigures() {\n    this.cells.forEach((row, index) => {\n      if (index === 1) {\n        row.forEach(cell => new Pawn(Colors.BLACK, cell));\n      }\n      if (index === 6) {\n        row.forEach(cell => new Pawn(Colors.WHITE, cell));\n      }\n      if (index === 0) {\n        row.forEach((cell, index) => {\n          if (index === 0 || index === 7) {\n            new Rook(Colors.BLACK, cell);\n          }\n          if (index === 1 || index === 6) {\n            new Knight(Colors.BLACK, cell);\n          }\n          if (index === 2 || index === 5) {\n            new Bishop(Colors.BLACK, cell);\n          }\n          if (index === 3) {\n            new Queen(Colors.BLACK, cell);\n          }\n          if (index === 4) {\n            new King(Colors.BLACK, cell);\n          }\n        });\n      }\n      if (index === 7) {\n        row.forEach((cell, index) => {\n          if (index === 0 || index === 7) {\n            new Rook(Colors.WHITE, cell);\n          }\n          if (index === 1 || index === 6) {\n            new Knight(Colors.WHITE, cell);\n          }\n          if (index === 2 || index === 5) {\n            new Bishop(Colors.WHITE, cell);\n          }\n          if (index === 3) {\n            new Queen(Colors.WHITE, cell);\n          }\n          if (index === 4) {\n            new King(Colors.WHITE, cell);\n          }\n        });\n      }\n    });\n  }\n  availableCellsForMove(cell) {\n    this.cells.forEach(row => {\n      row.forEach(cage => {\n        var _cell$figure;\n        return cell !== null && cell !== void 0 && (_cell$figure = cell.figure) !== null && _cell$figure !== void 0 && _cell$figure.canMove(cage) ? cage.available = !cage.available : cage.available = false;\n      });\n    });\n  }\n  updatedBoard() {\n    let newBoard = new Board();\n    newBoard.cells = this.cells;\n    return newBoard;\n  }\n}","map":{"version":3,"names":["Cell","Colors","Pawn","Rook","Knight","Bishop","Queen","King","Board","constructor","cells","initCells","j","row","i","cellID","push","WHITE","BLACK","getCell","x","y","getCellFromID","id","result","forEach","cell","getDiagonal","diagonalCells","cage","Math","abs","setFigures","index","availableCellsForMove","_cell$figure","figure","canMove","available","updatedBoard","newBoard"],"sources":["/home/arthas/github/custom-chess/src/model/Board.ts"],"sourcesContent":["import { Cell } from \"./Cell\"\nimport { Colors } from \"./Colors\"\nimport { Pawn } from \"./figures/Pawn\";\nimport { Rook } from \"./figures/Rook\";\nimport { Knight } from \"./figures/Knight\";\nimport { Bishop } from \"./figures/Bishop\";\nimport { Queen } from \"./figures/Queen\";\nimport { King } from \"./figures/King\";\n\nexport class Board {\n    \n    cells: Cell[][] = []\n    \n    initCells() {\n        for (let j: number = 0; j < 8; j++) {\n            let row: Cell[] = [];\n\n            for (let i: number = 0; i < 8; i++) {\n                let cellID = j * 8 + i\n                if ((i + j) % 2 === 0) {\n                    row.push(new Cell(this, i, j, Colors.WHITE, null, cellID)) // Белые ячейки\n                } else {\n                    row.push(new Cell(this, i, j, Colors.BLACK, null, cellID)) // Чёрные ячейки\n                }\n            }\n            this.cells.push(row)\n        }\n    }\n    getCell(x: number, y: number): Cell | null {\n        return this.cells[y][x] || null\n    }\n    getCellFromID(id: number): Cell {\n        let result: Array<Cell> = []\n        this.cells.forEach(row => {\n            row.forEach(cell => cell.id === id ? result[0] = cell : cell)\n        })\n        return result[0]\n    }\n    getDiagonal(cell: Cell): Cell[] {\n        let diagonalCells: Cell[] = []\n        this.cells.forEach(row => {\n            row.forEach(cage => {\n                if (Math.abs(cage.x - cell.x) === Math.abs(cage.y - cell.y)) {\n                    diagonalCells.push(cage)\n                }\n            })\n        })\n        return diagonalCells\n    }\n    setFigures() {\n        this.cells.forEach((row, index) => {\n            if (index === 1) {\n                row.forEach(cell => new Pawn(Colors.BLACK, cell))\n            }\n            if (index === 6) {\n                row.forEach(cell => new Pawn(Colors.WHITE, cell))\n            }\n            if (index === 0) {\n                row.forEach((cell, index) => {\n                    if ((index === 0) || (index === 7)) {\n                        new Rook(Colors.BLACK, cell)\n                    }\n                    if ((index === 1) || (index === 6)) {\n                        new Knight(Colors.BLACK, cell)\n                    }\n                    if ((index === 2) || (index === 5)) {\n                        new Bishop(Colors.BLACK, cell)\n                    }\n                    if (index === 3) {\n                        new Queen(Colors.BLACK, cell)\n                    }\n                    if (index === 4) {\n                        new King(Colors.BLACK, cell)\n                    }\n                })\n            }\n            if (index === 7) {\n                row.forEach((cell, index) => {\n                    if ((index === 0) || (index === 7)) {\n                        new Rook(Colors.WHITE, cell)\n                    }\n                    if ((index === 1) || (index === 6)) {\n                        new Knight(Colors.WHITE, cell)\n                    }\n                    if ((index === 2) || (index === 5)) {\n                        new Bishop(Colors.WHITE, cell)\n                    }\n                    if (index === 3) {\n                        new Queen(Colors.WHITE, cell)\n                    }\n                    if (index === 4) {\n                        new King(Colors.WHITE, cell)\n                    }\n                })\n            }\n        })\n    }\n    availableCellsForMove(cell: Cell | null) {\n        this.cells.forEach(row => {\n            row.forEach(cage => cell?.figure?.canMove(cage) ? cage.available = !cage.available : cage.available = false)\n        })\n    }\n    updatedBoard() {\n        let newBoard = new Board();\n        newBoard.cells = this.cells;\n        return newBoard\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}